<tool id="SRS_metadata" name="Validate ISO 19139 metadata documents" version="@VERSION@" profile = "20.01">
    <description>from files or Urls.</description>
    <macros>
        <import>macro.xml</import>
    </macros>
    <expand macro="SRS_requirements">
        <requirement type="package" version="1.19">r-ncdf4</requirement>
        <requirement type="package" version="0.6_6">r-geometa</requirement>
        <requirement type="package" version="1.4.3">r-httr</requirement>
        <requirement type="package" version="3.99_0.9">r-xml</requirement>  
        <requirement type="package" version="1.3.3">r-xml2</requirement>
    </expand>
    <command detect_errors="exit_code"><![CDATA[
        Rscript
            '$__tool_directory__/val_metadata.r'
            '$input'
            '$output'
        ]]>
    </command>
    <inputs>
        <param name="input" type="data" format="xml" label="Input data can be either a file or an url"/>    
    </inputs>
    <outputs>
        <data name="output" from_work_dir="Metadata_validation.txt" format="txt" label="Validate metadata"/>
    </outputs>
    <tests>
        <test>
           <param name="input" value="http://indores-tmp.in2p3.fr/geonetwork/srv/api/records/112ebeea-e79c-422c-8a43-a5a8323b446b/formatters/xml?approved=true"/>
           <output name="output" value="Metadata_validation.csv"/>
        </test>
    </tests>
    <help><![CDATA[
==========================
Preprocess Sentinel 2 data
==========================


**What it does**

Read a ISO 19139 from a file or url into an object in the geometa model.

**Input description**



+-------------+
|   Metadata  |
+=============+
| file or url |
+-------------+
|     ...     |
+-------------+

**Output**
    ]]>    </help>
        <expand macro="SRS_S2ref"/>
</tool>
